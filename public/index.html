<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Find your photos</title>
  <style>
    :root{--bg:#0f172a;--panel:#111827;--text:#e5e7eb;--muted:#9ca3af;--accent:#22c55e;--card:#1f2937}
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--text);font:16px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
    .wrap{max-width:900px;margin:40px auto;padding:0 16px}
    h1{font-size:28px;margin:0 0 20px 0}
    .panel{background:var(--panel);border:1px solid #1f2937;border-radius:10px;padding:16px}
    .row{display:flex;gap:10px}
    input[type=text]{flex:1;background:#0b1220;color:var(--text);border:1px solid #334155;border-radius:8px;padding:10px 12px}
    button{background:var(--accent);border:0;border-radius:8px;color:#052e16;font-weight:700;padding:10px 16px;cursor:pointer}
    #msg{margin:10px 2px;color:var(--muted)}
    #grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:14px;margin-top:16px}
    .tile{background:var(--card);border:1px solid #273244;border-radius:10px;overflow:hidden}
    .tile img{display:block;width:100%;height:auto;background:#000}
    .cap{padding:8px 10px;font-size:13px;color:#cbd5e1;word-break:break-all}
    .label{display:inline-block;font-size:12px;color:#93c5fd;margin-right:6px}
    a{color:#93c5fd;text-decoration:none}
    a:hover{text-decoration:underline}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Find neighbor photos</h1>

    <div class="panel">
      <div class="row">
        <input id="urlInput" type="text"
          placeholder="Paste a full Cloudinary JPG URL, e.g. https://res.cloudinary.com/…/image/upload/chiefs-luau/2025/September/09.28.2025/CH0928251006.jpg" />
        <button id="loadBtn">Load</button>
      </div>
      <div id="msg"></div>
    </div>

    <div id="grid"></div>
  </div>

  <script>
    const grid = document.getElementById('grid');
    const msg  = document.getElementById('msg');

    function addTile(url, label){
      const div = document.createElement('div');
      div.className = 'tile';
      div.innerHTML = `
        <img src="${url}" alt="${label}">
        <div class="cap"><span class="label">${label}</span>${url}</div>`;
      grid.appendChild(div);
    }

    document.getElementById('loadBtn').onclick = () => {
      grid.innerHTML = '';
      msg.textContent = 'Loading…';

      const input = document.getElementById('urlInput').value.trim();

      // Require a full Cloudinary JPG delivery URL
      const m = input.match(/^https:\/\/res\.cloudinary\.com\/[^/]+\/image\/upload\/(.+\/)?([^\/]+)\.jpg$/i);
      if (!m){
        msg.textContent = 'Please paste the full Cloudinary URL that ends with .jpg';
        return;
      }

      const lastSlash = input.lastIndexOf('/');
      const folder = input.slice(0, lastSlash);          // …/09.28.2025
      const fileWithExt = input.slice(lastSlash + 1);    // CH0928251006.jpg
      const file = fileWithExt.replace(/\.jpg$/i,'');    // CH0928251006

      const nm = file.match(/(\d+)$/);
      if (!nm){
        msg.textContent = 'Couldn’t detect the trailing number in the filename.';
        return;
      }
      const numStr = nm[1];
      const prefix = file.slice(0, -numStr.length);
      const n = parseInt(numStr, 10);

      const prevUrl = `${folder}/${prefix}${n-1}.jpg`;
      const currUrl = `${folder}/${prefix}${n}.jpg`;
      const nextUrl = `${folder}/${prefix}${n+1}.jpg`;

      msg.textContent = '';
      addTile(prevUrl, 'Previous');
      addTile(currUrl, 'This photo');
      addTile(nextUrl, 'Next');
    };
  </script>
</body>
</html>
