<script>
  const row = document.getElementById('row');
  const msg = document.getElementById('msg');

  function addTile(url, label) {
    const div = document.createElement('div');
    div.className = 'tile';
    div.innerHTML = `
      <img src="${url}" alt="${label}">
      <div class="cap"><strong>${label}:</strong> ${url}</div>
    `;
    row.appendChild(div);
  }

  document.getElementById('loadBtn').onclick = () => {
    row.innerHTML = '';
    msg.textContent = 'Loading...';

    const input = document.getElementById('urlInput').value.trim();

    // Require a full Cloudinary JPG URL (exactly like the one you open in the browser)
    if (!/^https:\/\/res\.cloudinary\.com\/.+\/image\/upload\/.+\.jpg$/i.test(input)) {
      msg.textContent = 'Please paste the full Cloudinary URL that ends with .jpg';
      return;
    }

    // Split folder vs filename
    const lastSlash = input.lastIndexOf('/');
    const folder = input.slice(0, lastSlash);               // .../09.28.2025
    const fileWithExt = input.slice(lastSlash + 1);         // CH0928251006.jpg
    const file = fileWithExt.replace(/\.jpg$/i, '');        // CH0928251006

    // Pull trailing number, keep prefix
    const m = file.match(/(\d+)$/);
    if (!m) { msg.textContent = 'Could not detect the trailing number in the filename.'; return; }
    const numStr = m[1];
    const prefix = file.slice(0, -numStr.length);
    const n = parseInt(numStr, 10);

    // Build the three URLs (prev, current, next)
    const prevUrl = `${folder}/${prefix}${n - 1}.jpg`;
    const currUrl = `${folder}/${prefix}${n}.jpg`;
    const nextUrl = `${folder}/${prefix}${n + 1}.jpg`;

    // Render them directly â€” no pre-checks
    msg.textContent = '';
    addTile(prevUrl, 'Previous');
    addTile(currUrl, 'This photo');
    addTile(nextUrl, 'Next');
  };
</script>
